<pfb-navbar></pfb-navbar>

<div class="container">
  <div class="row">
    <div class="column-12">
      <button ng-if="analysisJobList.isAdminUser"
        ui-sref="admin.analysis-jobs.import" class="btn btn-primary pull-right">
        Import Analysis
      </button>
      <button ng-if="analysisJobList.isAdminUser"
        ui-sref="admin.analysis-jobs.create" class="btn btn-primary pull-right">
        Run Analysis
      </button>
      <button ng-if="analysisJobList.isAdminUser"
        ui-sref="admin.analysis-jobs.create-batch" class="btn btn-primary pull-right">
        Run Batch
      </button>
      <h1 class="no-margin-top">Analysis Jobs</h1>
      <table class="table">
        <thead pfb-analysis-job-filter filters="analysisJobList.filters"></thead>
        <tbody>
          <tr ng-repeat="analysisJob in analysisJobList.analysisJobs">
            <td><a ui-sref="admin.analysis-jobs.detail({uuid: analysisJob.uuid})">{{analysisJob.uuid | limitTo: 5}}</a></td>
            <td>{{analysisJob.status | displayStatus}}</td>
            <td>{{analysisJob.neighborhood.label}}</td>
            <td>{{analysisJob.neighborhood.state_abbrev}}</td>
            <td>{{analysisJob.neighborhood.city_fips}}</td>
            <td>{{analysisJob.batch}}</td>
            <td>{{analysisJob.local_upload_task.status | displayStatus}}</td>
            <td>{{analysisJob.createdAt | date:'yyyy-MM-dd HH:mm:ss'}}</td>
            <td>
              <button ng-click="analysisJobList.deleteUpload(analysisJob)"
                      uib-tooltip="Delete"
                      class="btn-link glyphicon glyphicon-trash"></button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="buttons-pagination">
        <button class="btn-default btn" ng-click="analysisJobList.getPrev()"
                ng-disabled="!analysisJobList.hasPrev">

          Newer
        </button>
        <button class="btn-default btn" ng-click="analysisJobList.getNext()"
                ng-disabled="!analysisJobList.hasNext">
          Older
        </button>
      </div>
    </div>
  </div>
</div>
